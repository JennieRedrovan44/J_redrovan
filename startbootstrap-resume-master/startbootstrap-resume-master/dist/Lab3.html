<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Jennie Redrovan</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#about">
                <span class="d-block d-lg-none">Jennie Redrovan</span>
                <span class="d-none d-lg-block">
                    <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/img/Picofme.png" alt="Profile Picture" />
                </span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="index.html">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1a.html">Lab 1A: Artemis</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1B.html">Lab 1B: Bluetooth</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab2.html">Lab 2: IMU</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab3.html" style="color: rgb(255, 255, 255);">Lab 3: TOF</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab4.html">Lab 4: Motor Drivers, Open Loop Control</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab5.html">Lab 5: Speed Control</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab6.html">Lab 6: Orientation Control</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab7.html">Lab 7: Kalman Filter</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab8.html">Lab 8: Stunts!</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab9.html">Lab 9: Mapping</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab10.html">Lab 10: Bayes Filter (Sim)</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab11.html">Lab 11: Localization (Real)</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab12.html">Lab 12: Path Planning</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <section class="resume-section" id="about">
            <div class="resume-section-content">
                <h2 class="mb-2">Lab 3 : <span class="text-primary">TOF</span></h2>
                <!--Prelab-->
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Prelab</h3>
                        <p>
                        Before going into the lab, I planned out how to connect the ToF sensor to the Artemis board. I used the following connections: <br><br>
                        add image of setup 
                        <img src="assets/img_lab2/set_up_connection.png" alt = "set_up_connection" width=90% /><br><br>
                        Since we have two ToF sensors, both will have the same I2C address by default. Since we cannot have two 
                        devices with the same address on the same bus, we need to change the address of one of the sensors. <br><br>
                        The I2C bus (Inter-Integrated Circuit) is a form of communication between multiple devices by using serial (bit by bit)
                        communication. Essentially, the master device is the Artemis board and it sends a message, and the slave devices, like the ToF, has a address which it recognizes and then responds to. In simplier terms, the master device asks the slave device for data, the slave device sends the data back to the master device. <br><br>
                        However, each slave device, the two ToFs, must have a unique address. How I will ensure that both ToF have different address is I will wire the XSHUT pin to one of the Artemis GPIO pin. 
                        Then, I will disable one of the ToF sensors by setting the GPIO pin low (0), then change its address before turning it back on.By doing this 
                        the ToF that is disabled will have a different address than the ToF that is enabled. <br><br>
                        What I am currently planning to place the ToF in front and the back of the car. The reason why I think this would 
                        a better choice because this allows the car to detect objects in front of it and behind it. This is important because 
                        if the car is going forward and it detects an object in front of it, it can stop. If the car is going backwards and it detects an object behind it. 
                        A concern that I do have is it may not be able to detect its blind side or obstacles. However, I think this is a good start to 
                        where the ToF can potentially go. Another position would be side and front, but it won't be able to detect the back. I will have to think about this 
                        more as I go through the lab. 
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 1: Power up Artemis with a battery</h3>
                        
                        <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/lG5B-U_ed04"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                        </iframe>
                        
                        <p>
                            I soldered the JST connector to the 650mAh batteries to which I then used to 
                            power the Artemis. I then tested commands from lab 1 to check the BLE connection
                            by powering the Artemis with just the battery, as shown above!<br><br>
                            I also included some pictures battery connected to the Artemis board!
                            <img src="assets/img_lab3/IMG_5903.jpg" alt = "set_up_connection" width=90% /><br>
                            <img src="assets/img_lab3/IMG_5904.jpg" alt = "set_up_connection" width=90% />
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 2: Connect the ToF sensor to the QWICC breakout board</h3>
                        
                        <p>
                        In order to connect the ToF sensior to the Artemis, I soldered the longer QWIIC cable to the pads of the 
                        ToF board. <br>
                        red wire    -> Vin <br>
                        black wire  -> Vout <br>
                        yellow wire -> SCL <br>
                        blue wire   -> SDA <br><br>
                        As shown below: <br>
                        <img src="assets/img_lab3/IMG_5943.jpeg" alt = "set_up_connection" width=90% /><br>
                        <img src="assets/img_lab3/IMG_5940.jpeg" alt = "set_up_connection" width=90% />
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 3: Scan the I2C channel to find the sensor</h3>
    
                        <p>
                        I installed SparkFun VL53L1X 4m laser distance sensor library, and from there I opened <br><br>
                        file->Examples->Apollo3->Example05_Wire_I2C.ino<br><br>
                        I then connected one of my ToFs, and the Example05_Wire_I2C.ino sketch detected the sensor on the I2C bus. The output of the scan is shown below:
                        <img src="assets/img_lab3/IMG_scanning.png" alt="scanning" width="90%" /><br><br>
                        As seen above, the sensor had a I2C address of 0x29. According to the datasheet for the ToF, the default address is 0x52. 
                        For 0x52 in binary is 0b01010010 and for 0x29 is 0b00101001. However, notice that for 0x52 in binary it has been shifted to the right 
                        which results in 0b00101001 (or 0x29). This operation is essentially is removes the the least significant bit which is used read/write. <br><br>
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 4: ToF Sensor</h3>
                        <h4 class="mb-0">Sensor Mode Discussion </h4>
                        <p>
                            Using the SparkFun VL53L1X Arduino library, I found that it supports two modes, which are short and long. I was able to lookup the 
                            datasheet for the ToF, and it gave an overview for both long and short modes. For long mode, it can reach up to 4m, but the maximum distance it can measure under strong ambient light is .73m. 
                            However, for the short mode the maximum distance is 1.36m in the dark, and the maximum distance under strong ambient light is 1.35m. I have included the 
                            chart below as a reference! <br><br>
                            <img src="assets/img_lab3/IMG_datasheet.png" alt="scanning" width="90%" /><br><br>
                            Considering that the car may be under different environments where it may affect the sensors ability to perform, I would rather choose the short mode. 
                            Given that with the short mode the effect of light is very minimal, it is more of the logical choice. <br><br>
                            <h4 class="mb-0">Testing chosen mode </h4>
                            

                        </p>
                    </div>
                </div>








        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
