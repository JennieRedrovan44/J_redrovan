<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Jennie Redrovan</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#about">
                <span class="d-block d-lg-none">Jennie Redrovan</span>
                <span class="d-none d-lg-block">
                    <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/img/Picofme.png" alt="Profile Picture" />
                </span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="index.html">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1a.html">Lab 1A: Artemis</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1B.html">Lab 1B: Bluetooth</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab2.html">Lab 2: IMU</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab3.html">Lab 3: TOF</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab4.html"style="color: rgb(255, 255, 255);">Lab 4: Motor Drivers, Open Loop Control</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab5.html">Lab 5: Speed Control</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab6.html">Lab 6: Orientation Control</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab7.html">Lab 7: Kalman Filter</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab8.html">Lab 8: Stunts!</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab9.html">Lab 9: Mapping</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab10.html">Lab 10: Bayes Filter (Sim)</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab11.html">Lab 11: Localization (Real)</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab12.html">Lab 12: Path Planning</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <section class="resume-section" id="about">
            <div class="resume-section-content">
                <h2 class="mb-2">Lab 4 : <span class="text-primary">Motors and Open Loop Control</span></h2>
                <!--Prelab-->
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Prelab</h3>
                        <p>
                            Before lab, I planned out the connections between the Artemis, the motor drivers, and the battery. <br><br>
                            Diagram of intended connections between the motor drivers, Artemis, and battery: <br><br>
                            <img src="assets/img_lab4/IMG_1250.jpeg" alt="scanning" width="90%" /><br><br>
                            
                            <h5 class="mb-0">Battery Discussion</h5>
                            The reason why we are powering the Artemis and the  motor drivers/motors from separate batteries is because the motors draw more power than the Artemis.
                            By separting the paths of the power, we can ensure that the Artemis will not be affected by the noise from the motors. 
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 1: PWM signals</h3>
                        <p>
                            Before soldering the motor drivers, I wanted to ensure that the motors worked. I tested on of the motors with a PWM signal. 
                            I powered on the pins LOW and the other pin HIGH. <br>
                            A reasonable settings for the power supply would be 3.7V given that is the voltage of the battery that we are using. <br><br>
                            In order to do these tests, I hooked the Vin and the GND to the power supply. I then connected the outs the BOUT1 and AOUT1 to the ground of the ocsilloscope probe, and the probe to 
                            the BOUT2 and AOUT2 to the probe of the ocsilloscope. This is shown below!<br><br>
                            <img src="assets/img_lab4/IMG_5956.jpg" alt="scanning" width="90%" /><br><br>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/z0tfdfDvVCw"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            Code used to test above: 
                            <br><br>
                            <img src="assets/img_lab4/IMG_PMW_signal.png" alt="scanning" width="50%" /><br><br>
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 2: Take your car apart!</h3>
                        <p>
                        I forgot to take a picture when my car was empty, I got too excited to start working on it. But here is a picture of the car with its control PCB still attached. <br><br>
                        <img src="assets/img_lab4/IMG_5952.jpg" alt="scanning" width="90%" /><br><br>
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 3: Motors</h3>
                        <p>
                            Frist, the wheels on each sides were tested individually. I supplied voltage to the motor driver with the power supply. 
                            The PWM values used to test if the wheel were function was both 200. Videos of the wheels spinning on each side are shown below. Also, for the 
                            code I used the the same code used in the PWM signals, but I did tweak it becuase I got a curious.
                            <h5 class="mb-0">Left Wheel</h5>
                            I got a little carried away, and I ended up pausing the spinning then continuing which is shown in the video. <br><br>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/-R9warffir4"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            Code used to test above:<br><br>
                            <img src="assets/img_lab4/IMG_PS_LEFT.png" alt="scanning" width="50%" /><br><br>
                            
                            
                            <h5 class="mb-0">Right Wheel</h5>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/fldjhEcmoVM"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            Code used to test above:<br><br>
                            <img src="assets/img_lab4/IMG_PS_LEFT.png" alt="scanning" width="50%" /><br><br>
                            
                            

                            <h5 class="mb-0">Both Wheels</h5>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/8aoRf4QSyKU"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            Code used to test above:<br><br>
                            <img src="assets/img_lab4/IMG_PS_BOTH.png" alt="scanning" width="50%" /><br><br>
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 4: Motors powered by battery</h3>  
                        <p>
                        Similar to the previous task, I tested the wheels with the battery. I used the same PWM values of 200. I also used similar code above, but for both wheel I tweaked it a little a bit go forward, pause, and then backwards. <br><br>
                        <h5 class="mb-0">Left Wheel</h5>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/MWLtuCqmJSc"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            
                            <h5 class="mb-0">Right Wheel</h5>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/nHlgLtmH9pY"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            
                            <h5 class="mb-0">Both Wheels</h5>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/TU1Yg4Dzbi8"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe><br><br>
                            Code used to test above:<br><br>
                            <img src="assets/img_lab4/IMG_battary_BOTH.png" alt="scanning" width="50%" /><br><br>
                        
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 5: Components secured in the car </h3>  
                        <p>
                            Before driving the car on the ground before soldering, I wanted to make sure that the components could fit in the car, and allows me the ease to move around it needed. 
                            I placed the IMU on the front of the car that is on a flat surface to ensure that is leveled. 
                            I placed the Artemis on the back of the car and the motor drivers for ease and that the wires were not too long. Also, I did consider placing in the front, but the IMU made more sense in the front. 
                            Another component that I placed in the back of the car was the battery that connects to the Artemis. 
                            One regret that I do have is that I made the wires a little to long, but then again it doesn allow me to move stuff around if I need to move it. <br><br>
                            <img src="assets/img_lab4/IMG_1262.jpg" alt="scanning" width="50%" /><br><br>
                            <img src="assets/img_lab4/IMG_5963.jpg" alt="scanning" width="50%" /><br><br>
                            <img src="assets/img_lab4/IMG_5964.jpg" alt="scanning" width="50%" /><br><br>

                            Video of the car driving around: <br><br>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/09TOr0Z7URk"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe>
                        </p>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 6: Lower Limit in PWM value</h3>  
                        <p>
                            When the battery was not fully charged, the car was able overcome the static friction and move forward at a minimum PWM of 35 and required 70 PWM for on-axis turning. When fully charged, the left wheel required a minimum PWM of 30 to move, 
                            while the right wheel required 55 PWM, resulting in the car not moving in a straight line at these values. 
                        </p>

                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 7: Calibration</h3>  
                        <p>
                            As mentioned above in the previous task, the car was not able to move in a straight line at the minimum PWM values given that the motors are running at different PWM. 
                            The calibration factors for forward motion were determined through iterative testing by observing the car's movement. If the robot veered left or right, adjustments 
                            were made to the scaling factors to balance the wheel speeds. The left wheel's PWM is multiplied by 0.87 to slightly reduce its speed, while the right wheel's PWM remains at 0.815.
                            These factors, when multiplied by 255, help the car move more consistently in a straight line. As shown below: <br><br>

                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/IVRQ8Nr2GfY"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe>
                            <br><br>
                            Code used shown below: <br><br>
                            <img src="assets/img_lab4/IMG_calibration.png" alt="scanning" width="50%" /><br><br>
                        </p>

                    </div>
                </div>

                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Task 8: Open-loop/h3>  
                        <p>
                            I had a tough time getting the car to go backwards straight, so I calibrated that as well through many iterative testing by observing the car's movement.
                            Also, I made the car go forward and backwards in a straight line. I also made the car turn left and right. However, the video got cut in two parts becuase my videographer (my friend) accidentally stopped recording.
                            <br><br>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/0SSGVWNRWVc"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe>
                            <br><br>
                            <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/IccnNHB7aa4"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                            </iframe>
                            <br><br>
                            Code used shown below: <br><br>
                            <img src="assets/img_lab4/IMG_openloop1.png" alt="scanning" width="50%" /><br><br>
                            <img src="assets/img_lab4/IMG_openloop2.png" alt="scanning" width="50%" /><br><br>
                        </p>

                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Level 5000: analogWrite Frequency Discussion </h3>  
                        <p>
                            The frequency measured from the oscilloscope was 183.44 Hz, corresponding to a period of 5.45 ms. 
                            In contrast, the ToF sensor which was generating data at approximately 1 Hz. However, now that I think about this,
                            the time to generate must be wrong, it should not take that long.
                            Regardless, the ToF sensor's update rate is significantly lower than the frequency generated by analogWrite(), 
                            meaning the PWM signal is fast relative to the sensor data rate. 
                            This means that the motors receive a rapid signal to operate smoothly. If we were to manually configuring timers to generate a faster PWM signal 
                            would be benefcial given that it would allow for more motor control and respoonse.        
                        </p>

                    </div>
                </div>

                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Level 5000: Lower Limit PWM And Open Loop Control/h3>  
                        <p>
                            Using the values that I found perviously, I just used the same values to make the car go forward at a low PWM. Using those values, 
                            showed me that that was the slowest that the car could go forward without stopping. The robot is able to reach the slow setting pretty quick and overcomes static friction.
                            However, if I lowered the PWM value any lower, the robot would not be able to move.
                            
                        </p>

                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Conclusion/Reference</h3>  
                        <p>
                            Overall, the lab was really long. I did enjoy soldering and being able to plan about where the wires were going to go. I did feel that at times the calibration was tedious, but it was worth it in the end becuase I got it to go straight!
                            I am quite proud of what I was able to accomplish, especially given that I did not have any complications with my motor drivers or the Artemis.


                            References: <br><br>
                            I refernced Stephan and Mikayla's lab 4 to help me understand what was needed for this lab!
                    </div>
                </div>


        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
